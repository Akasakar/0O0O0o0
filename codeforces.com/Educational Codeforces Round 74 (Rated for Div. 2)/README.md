转至：[Spy97](https://blog.nowcoder.net/n/765f50fffbd048bba68960d38d474b6d)

# [Codeforces 1238 E. Keyboard Purchase](https://codeforces.com/contest/1238/problem/E)

## 题意：

给出长为n的字符序列，集合大小为m，要求给字符编号（即一种m的排列），定义代价为相邻字符编号差的绝对值，求最小代价

## 题解：

状压dp  
不妨设按照1~m的顺序给字符编号，每次确定一个字符，代价为它到之间已经确定的字符的代价和  
但是，我们无法保留确定的顺序，如何求解？  

不妨假设所有字符一开始标号均为1，那么，当编号1确定时，将其他编号都设为2，当编号2确定时，将没确定的都设为3，以此类推
每确定一个编号的过程，代价更新，就是，已确定的和尚未确定的两两代价之和  
例如 abcd  
当确定a为编号1时，那么 bcd的编号距离a至少为1，所以要加上 a-b,a-c,a-d的代价  
当确定b为编号2时，那么cd的编号距离a至少为2，距离b至少为1，所以加上b-c,b-d的代价  
有因为上次加过a到其他字符的代价，这次新增加的距离为1，所以加上 a-c,a-d的代价  
当确定c为编号3时，那么d的编号距离a至少为3，距离b至少为2，距离c至少为1，新增加的代价都是1，所以，加上 a-d,b-d,c-d的代价   



